machine: 
  java: 
    version: oraclejdk8

dependencies:
  cache_directories:
    - "~/.gradle"

test:w
 override:
   - gradle clean build --stacktrace
checkout:
  post:
    - git submodule sync
    - git submodule update --init
    - git submodule foreach --recursive git checkout master

deployment:
  production:
    branch: master
    commands:
         - git remote add heroku git@heroku.com:prorata-api.git
         - "[[ ! -s \"$(git rev-parse --git-dir)/shallow\" ]] || git fetch --unshallow"
         - cd ../../.. && git subtree push --prefix http://github.com/VGNBug/prorata-api heroku master

      
general:
  branches:
    only:
      - master
  artifacts:
      - "/home/ubuntu/**repo_name**/build/outputs/reports/**testFolderName**/connected"


